<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:with="
    hasFrag=${contentFragment != null and !#strings.isEmpty(contentFragment)},
    hasSlot=${contentSlot != null and !#strings.isEmpty(contentSlot)}
">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title th:text="${pageTitle} ?: 'Catering System'">Catering System</title>

    <!-- App styles -->
    <link rel="stylesheet" th:href="@{/css/app.css}"/>

    <!-- Bootstrap (optional) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <style>
        /* Small layout-specific touch-ups */
        .page-wrap { max-width: 1100px; margin: 0 auto; padding: 24px 16px; }
        .top-nav{
            position:sticky; top:0; z-index:1000;
            background: linear-gradient(90deg, rgba(108,92,231,.95), rgba(0,184,148,.95));
            box-shadow:0 10px 30px rgba(17, 38, 146, .18);
            backdrop-filter:saturate(140%) blur(6px);
        }
        .top-nav .nav-wrap{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;color:#fff;}
        .top-nav .brand{font-weight:800;letter-spacing:.3px}
        .top-nav .nav-links{display:flex;gap:12px;flex-wrap:wrap}
        .top-nav .nav-links a{
            color:#fff;text-decoration:none;padding:8px 12px;border-radius:10px;
            background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
            border: 1px solid rgba(255,255,255,.18);
            transition: transform .15s ease, box-shadow .15s ease, background .2s ease;
        }
        .top-nav .nav-links a:hover, .top-nav .nav-links a:focus{
            transform: translateY(-1px);
            box-shadow:0 8px 18px rgba(0,0,0,.18);
            background: linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.10));
            outline:none;
        }
        .top-nav .nav-links a.active{box-shadow: inset 0 0 0 999px rgba(255,255,255,.08);}
        footer{background: linear-gradient(90deg, #6c5ce7, #00b894); color:#fff; padding:12px 20px;}
    </style>
</head>

<body th:classappend="${bodyClass}">
<nav class="top-nav">
    <div class="nav-wrap">
        <div class="brand">Catering System</div>
        <div class="nav-links">
            <a th:href="@{/}" th:classappend="${activePage}=='home' ? ' active' : ''">Home</a>
            <a th:href="@{/menus}" th:classappend="${activePage}=='menu' ? ' active' : ''">Menu Management</a>
            <a th:href="@{/schedule-list}" th:classappend="${activePage}=='schedules' ? ' active' : ''">Schedules</a>
            <a th:href="@{/about}" th:classappend="${activePage}=='about' ? ' active' : ''">About</a>
        </div>
    </div>
</nav>

<main class="page-wrap">
    <!-- Mode 1: Fragment injection (only when contentFragment is a non-empty string) -->
    <div th:if="${hasFrag}" th:replace="${contentFragment}">Loading...</div>

    <!-- Mode 2: Slot injection (when contentSlot is set to a template name exposing ::content) -->
    <div th:if="${!hasFrag and hasSlot}" th:insert="${contentSlot} :: content">Loading...</div>

    <!-- Mode 3: Static fallback (when neither contentFragment nor contentSlot provided) -->
    <div th:if="${!hasFrag and !hasSlot}">
        <section class="glass-card">
            <h2 class="title-gradient mb-2" th:text="${pageTitle} ?: 'Welcome'">Welcome</h2>
            <p class="mb-0">This page is using the base layout without injected content; supply contentFragment or contentSlot from the controller to replace this area.</p>
        </section>
    </div>
</main>

<footer class="text-center mt-4">
    <small>Catering System Â© 2025. All rights reserved.</small>
</footer>

<!-- Optional app script -->
<script th:src="@{/js/app.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
